<!DOCTYPE html>
<html lang="en">
<script src="/frontEnd/src/controllers/Error404.js"></script>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BienStarTotal</title>
    <!-- CSS Global -->
    <link rel="stylesheet" href="Base.css">
    <!-- CSS Específico -->
    <link rel="stylesheet" href="Perfil.css">
</head>
<body>
    <script src="/frontEnd/src/controllers/loader.js"></script>

    <div id="contenedorPrincipal">
    
        <!-- Encabezado -->
        <div id="encabezado">
            <div class="header-inner">
                <div class="logo">
                    <a href="index.html">
                        <img src="../../Imagenes/Login_Perfil/Logo.png" alt="Logo BienStarTotal" class="logoImg">
                    </a>
                </div>
                <div class="menúBotones">
                    <button class="btnMenu" onclick="showLoaderAndRedirect('index.html')">Inicio</button>

                    <button class="btnMenu" onclick="showLoaderAndRedirect('alimentos.html')">Alimentos</button>
                    <button class="btnMenu" onclick="showLoaderAndRedirect('dietas.html')">Dietas</button>
                    <button class="btnMenuNoti">
                        <img src="/Imagenes/Login_Perfil/Notificacion.png" id="btnNotification">
                    </button>
                </div>
                <div class="login">
                    <div style="float: left; height: 100%; width: 75%;" onclick="window.location.href='login.html'">
                        <button class="btnPerfilView" id="btnPerfilView">
                            <span class="nameUser">Nombre de Usuario</span>
                        </button>
                    </div>
        
                    <!-- Imagen Usuario -->
                    <div style="float: left; width: 10%; height: 100%;">
                        <img src="/Imagenes/Login_Perfil/UserPerfil.png" id="fotoUsuario" alt="Foto de Usuario"
                            style="cursor:pointer;" onclick="window.location.href='login.html'">
                    </div>
                </div>
            </div>
        </div>
        
       
       

        <div id="cuerpo">
            <div id="divMenuLateral">
                <button class="botonesPerfilSelec">PERFIL</button>
                <button class="botonesPerfil" id="btnDieta" >MI DIETA</button>
                <button class="botonesPerfil">CALENDARIO</button>
            </div>
            
            <div id="divInfoUser">
                <div id="contenedorInfoSesion">
                    <div id="contenedorInfo">
                        <div id="tituloInfo">
                            Información de usuario:
                        </div>
                        <div style="width: 100%; height: 80%;">
                            <div class="datoUsuarioRow">
                                <div class="info">Nombre:</div>
                                <span id="spanNombre" class="spNombre">Nombre del usuario aquí</span>
                            </div>
                            <div class="datoUsuarioRow">
                                <div class="info">Edad:</div>
                                <span id="spanEdad" class="spAge">Edad del usuario aquí</span>
                            </div>
                            <div class="datoUsuarioRow">
                                <div class="info">Peso:</div>
                                <span id="spanPeso" class="spWeight">Peso del usuario aquí</span>
                            </div>
                            <div class="datoUsuarioRow">
                                <div class="info">Altura:</div>
                                <span id="spanAltura" class="spHeight">Altura del usuario aquí</span>
                            </div>
                            <div class="datoUsuarioRow">
                                <div class="info">Correo:</div>
                                <span id="spanCorreo" class="spEmail">Correo del usuario aquí (censurado)</span>
                            </div>
                        </div>
                    </div>
                    <div id="contenedorCerrarSesion">
                        <div id="imagenUser">
                            
                        </div>
                        <button id="cerrarSesion">CERRAR SESIÓN</button>
                        <script></script>
                    </div>
                </div>
            </div>
            <script>
                document.addEventListener("DOMContentLoaded", () => {
                    const usuarioGuardado = localStorage.getItem("usuario");
                    console.log(JSON.parse(localStorage.getItem("usuario")));
                    if (usuarioGuardado) {
                        const usuario = JSON.parse(usuarioGuardado);
                        // Nombre en header
                        const nameUserSpan = document.querySelector(".nameUser");
                        if (nameUserSpan) {
                            nameUserSpan.textContent = usuario.name;
                        }
                        // Nombre en info
                        const nombreSpan = document.getElementById("spanNombre");
                        if (nombreSpan) {
                            nombreSpan.textContent = usuario.name || "-";
                        }
                        // Edad
                        const edadSpan = document.getElementById("spanEdad");
                        if (edadSpan) {
                            edadSpan.textContent = usuario.age || "-";
                        }
                        // Peso
                        const pesoSpan = document.getElementById("spanPeso");
                        if (pesoSpan) {
                            pesoSpan.textContent = usuario.weight ? usuario.weight + " kg" : "-";
                        }
                        // Altura
                        const alturaSpan = document.getElementById("spanAltura");
                        if (alturaSpan) {
                            alturaSpan.textContent = usuario.height ? usuario.height + " cm" : "-";
                        }
                        // Correo
                        const correoSpan = document.getElementById("spanCorreo");
                        if (correoSpan) {
                            correoSpan.textContent = usuario.email || "-";
                        }
                    }
                });
            </script>
            <script>
                /*Script Cerrar sesión y mandar al login con cerrarSesion*/
                document.getElementById("cerrarSesion").addEventListener("click", () => {
                    localStorage.removeItem("usuario");
                    window.location.href = "login.html";
                });
                //Si esta registrado y le da a mi dieta lo manda a dietas.html
                document.getElementById("btnDieta").style.cursor = "pointer";
                

                document.getElementById("btnDieta").addEventListener("click", () => {
                    onclick = "showLoaderAndRedirect('dietas.html')";
                    showLoaderAndRedirect('dietas.html');
                });

            </script>

            


        </div>
        <div id="pie">
            <div class="footer-inner">
                <button class="instaBoton"></button>
                <button class="faceBoton"></button>
                <button class="youTubeBoton"></button>
                <button class="whatsBoton"></button>
            </div>
        </div>
    </div>
    <div id="loader">
        <span class="loader-text">Cargando</span>
        <div class="loader-dots"></div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const currentPage = window.location.pathname.split("/").pop();

            const btnInicio = document.querySelector("button[onclick*='index.html']");
            const btnAlimentos = document.querySelector("button[onclick*='alimentos.html']");
            const btnDietas = document.querySelector("button[onclick*='dietas.html']");
            const btnPerfilView = document.getElementById("btnPerfilView");

            // Resetear estilos del menú principal
            [btnInicio, btnAlimentos, btnDietas].forEach(btn => {
                if (btn) {
                    btn.classList.remove("btnMenuSelec");
                    btn.classList.add("btnMenu");
                }
            });

            // Asignar color activo según la página actual
            if (currentPage === "index.html") {
                btnInicio.classList.add("btnMenuSelec");
            } else if (currentPage === "alimentos.html") {
                btnAlimentos.classList.add("btnMenuSelec");
            } else if (currentPage === "dietas.html") {
                btnDietas.classList.add("btnMenuSelec");
            } else if (currentPage === "perfil.html" && btnPerfilView) {
                btnPerfilView.classList.add("btnPerfilViewSelec");
            }
        });
    </script>

        
</body>
</html>